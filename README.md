# Insurance policy example app

## Objectives

Create an application that can:
- list insurance policies
- create an insurance policy
- read an insurance policy
- edit an insurance policy

Business object: Insurance policy:

| Name                     | Type                    | Editable | Validation                                 |
|--------------------------|-------------------------|----------|--------------------------------------------|
| Identifier of the policy | Integer                 | No       | Autogenerated, mandatory, unique, non null |
| Name of the policy       | String                  | Yes      | Non null, non empty                        |
| Status of of the policy  | Enum: ACTIVE / INACTIVE | Yes      | Non null                                   |
| Start date of cover      | Date                    | Yes      | Non null, mandatory                        |
| End date of cover        | Date                    | Yes      | Non null, mandatory                        |
| Creation date            | Date                    | No       | Autogenerated, mandatory, non null         |
| Update date              | Date                    | No       | Autogenerated, mandatory, non null         |

## Build and run

Requirement: Need a valid Docker environment.

First, build the application:

```shell
./mvnw clean install
```

For a first run, prepare the local database:

```shell
./startDbAndUpdateSchema.sh
```

This script will start a local PostgreSQL database named "insurance_policy" (using `docker-compose`) and update its schema (using Liquibase).
You can then connect to it on port 15432, with the user "postgres" (password "admin").

You can then start the application:

```shell
java -jar target/insurance-policy-*.jar --spring.profiles.active=dev
```

For the ease of use and test, you can access to a Swagger UI page:

http://localhost:8080/swagger-ui/index.html
